language: node_js
node_js: stable
addons:
  firefox: latest
script:
- npm run build
- npm run test:lint
- xvfb-run npm run test:polymer:local
# - 'if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then npm run test:polymer:sauce; fi'
- ./update.sh
env:
  global:
  # SAUCE_USERNAME
  - secure: SnxV2HmgBTS0cPLoaOEjP1S9BTjRiCilNlxXFAt27utCSXfh6W6TRHAVBt8uyNpfHRr2o3Vy2U1HP9/54VU+G7oYz+zqosJspffbQHL0YQYPs05R/Nb6dGuLm7nNVYNP7XEusv3FWS43rfnen4+qAcUacA9em5YqAB2JeXQdDuVhlwljmU7biKO8W//kZFWLOQR5i2yceJKS1TuP909m8PLP3KfsRb/ZMBpRknuWNvxrG8nQrziv5MV+uBpxYiJz5ru1gtETG3Z5uafNn70vWpLbs1dlTQmgxZluF0HYKafZajbk0Lp0yCGfrWyGVE+yhfyrXU80ji6YkkU0VuwHQytFFet5ltGlVfmfJJAyTo4HQLyPlPEz5HO5oZmG0W2uehRO48eu3T4I6+JgrtWkR5G/JnD7GZDFdmh7rDPwYDjSTj8p4KIkGg6ys3bxpvxRlMzrAZW7mjYFvvZt5g9K5Rqb3XbKpqMiVcnlQmGKKn+spt+/qediMZ1JAyAxmgaUUfnQHSCGWSkTAqdpvtOo9985CTntZyKlwS7rA/PyWFlv3q7TePNJ+Szu91ENiztZ9iNn1vdxTZCf2S0npOCw58uygn11ghnOX2GaGXscxm79lpC3KBG5ZNxY0/9CQgTavVcEj3CfsQqkAXjZO2Au1YOstTzOOqy5tb0d4eUiRmw=
  # SAUCE_ACCESS_KEY
  - secure: Lu1Fz7O3YXkI4DR3BQ67Qg0OQDHEQXEP4x+or1TLI7I2w/Rg2klazjoeKrr+DlZPKrttEOjKwVktJQo7uiQ3dnwRThBzXIaXadX+s6YgLu5PtpC0f2BitXhTw103DyDTWl4jIJCHN66AeBxto6tlx1KLMLNWsdJ1s1X84DyNvUdsz328w8lhNDdzroly5XhkzjYCecXJtIa9+0R1011n7viLyKJKcpRGfa1gTo4CW+w3GKg4ckO8X2bwj8EPpFyKcT4Hm85iD7mA3++KVAbBNr8KbKT5r/xjQnJPeXV/hF6OXQ7J7DGpT6V0nGxOnJNFJLTAHUilE00k8y5Ip4xYlokQUisnZoj3G86hmYQZIqWjhEelACrr2DfCkxixmbsxSwLLNLI5O6Ms5l5B31mx1xAKj7zblKiBKzocqOIUMyzRpSi+4FZRqTKIkm7xeMOaByBafX8jd79bAKhnzPZqCjlSKL8qCRGuNkKvqpSg7Q0ygEst/2+RARoml7rqpFhn9YkqftokYZ23VBf3bES5Rew/6jv6Jlw9KQ3nbYWrhhA9PU6xR1gxdW+m78j8SmxtLiez66RhYlx5Rup3mMkvaz+0EdA6ZGvL/89Iwux4u/tlmAjqkVOnL9PqWbPN3l43aG2UqazOB+unSlBgojyD5JRZDSQZCx5fZbgighJIDeM=
  # CDN_SECRET
  - secure: PWMEOsG1/Zc4SP3ZlLXPZllVvwvRWB3K1KO183eS6rKjGzrQqoEGg1ccSJUx5ZYF4F/H9qO9OhxAxeqLvDNAjBs3qENPJZ+9vxaQQRJDII7Q0vkLk0YnWLPJ8uacR9Nyuwrdl+cKWzVk63NSSF0X2p13x2MxRhMyWfXnQ3NSoYJMsmuJcwJmMy4ISCi49NHLuIGtHSJulYQuOGsJ5ZAmJBvTQFm1466GH7qu/nSnZOYzt6vMiivgW8ZTsWJLrY9RyXWfOn67Bl1OT5R9U/nL405M7hzx+KnJp97m1N0FBr19FWJh+a8CrzVxUE5/QUlQpvNG50b3jLldsrv4T/UPPzi7PGVKa4PQ74Fsxk/H1eJ9EPi7lci+VCfqp6bzAq/nx2V4gkbmyE0OFAh1SzWNH6Ak3QqeO4/YUoJgucsPa6K5gFKd4idJQcz9qw5CpopTUxAI6ry/5QFiOz0ErjbFacVtkCoOppu2wuprqNUDEZqAFVthvCf2r98FbJNrenEDASqD/UxBy9j/gDZ83oXy07mSgDEwOa3/9+J2wRcM3rPqt3t9Kx+T5FvA48SKAsQtqs9pQPwfIlvl2h0QtgMpuou+98uM53xWAkpM3Cev84edBulTMr3komh0+U4FSaq7sInfTg2HepGG7PQKo5wElApdK+daaEVIy3DMh16qkRo=
  # GITHUB_RELEASE_TOKEN
  - secure: R7S2T5YxHuOF27LVv1Stb6PdIho8CoIqdtTxh/4vA5wcPabhe7htWUX7FEVPFUFk/8lTpOG0wJ0sM1jRhsUvNuv0xrE/YIkrQSxnfMcUbYETjvKwn4tPD3RR1WLx6Ekd6gEgW/1z8dFM+WMR+KXvaGEjCK7dB715Ls/BoA/ZF2rW1P0CPrz1v7Flxnc9OJPA4R5f5PzqhBvg1rzchJ4bWmXQWaWNyqjdvzhn3SQpsC1x+fIPfj8fCdh9xoJVG1TDBCtsSby3TILaKRZDtvwKh/86zpvRiCaE10TkZbJo7ijGds36CyKqZ35an+lzUd4kldT53rQC592teAK2iqIH/UF4qEXpbQ0WSAnLA90h4iegOsf8cK/gThfv6HDWaM6/yfPAtKFds05+Wp8DGa3WQnq9sjbWkze4n5sDZlWtetRtVjzMqIJmEs4/N/e8t8fcTeBU7akmqguDVFj39j+DnobrI9bn5Cen4tblt1KDJUX71orc3n/sLw+XgT+WsqfxyXZqp9oOBuOEG9JnqklbRuZ3HUPPOuk9LpcGc73VgbXFP0C4I5fdEonHYnN/n+QxiXkRS2JNMPHnR+7cLTXbgmnCvq1laybnaXCXxwbe8Spxgr3ig5+tUc1rfClg4YABBMFcA4M/bnA69qf/cNbx/XNStjQeQODWpRnjbeSqEmc=

deploy:
  provider: npm
  email: d2ltravisdeploy@d2l.com
  skip_cleanup: true
  api_key:
    # d2l-travis-deploy: a50f......87d1
    secure: F52lR5ufXAsw3kazLLfbrvIkM8lXR3buCD9DAf2iTMrinU7suHyKW/7gHk9LP8GnXCSE5Rs5r6L7Q/7n8LLni+M1LUPMnZqdPmtPaIz7N4DJBLi5el0Hnyy6ccKsWVK358ovUyNyoePxxrFI2Ahi2qA/LU/Ct0SiNcvySCgRBfiPPVjTRf/UdhiWqYezF+ekc/5RuU8mBaaOkEaZR3eU5FTTFpyGj47Fg508neoCc6qT614wT7pwrVlecAWok+4PY3KtNJAdzaSTyuIJHEaXdUtD4ZXLjvKJQ/Dna63J8a2cYjnkskXwRqeJMfYIU9LnW7pvfSLRJ5bQiRqD4bQ/yQ0qvLP+FMok1sSfV2HrMv4Q3hdDntJnNzp9fmOx801kX8yK3VS0iZ1nj/kr98vdQK1RNcahqQ+DRAi97+LUy5rGB/j4LOL06fJ9TaHadcAsMDlACuiLLS160iBqMT6sWgyQNkTIFFYWUmTnSVPPI9HtA5Cny6Kx3HWDgs3W+u5Kb5frUwlLDL0gNg0svccs387mVQnSlTD3ODbtHZoWLgysqkXL3KguvW0sdAGRBKgY5Tv1YN/OCjMxceJ5iNYa5RNGtQc1gYVns6WhPCfv3HRIFO2aCXfYOfDb5LrscW47fNTvh9MdDjdJ2WN+f13ACGDbo+5xAXyiY8d05NVUB/c=
  on:
    branch: master
    repo: Brightspace/d2l-fetch-dedupe
