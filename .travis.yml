language: node_js
node_js: stable
script:
- npm run build
- npm run test:lint
- wct --skip-plugin local
- 'if [ "$TRAVIS_BRANCH" == "master" ]; then frauci-update-version && export TRAVIS_TAG=$(frauci-get-version) && npm run build && npm run publish-release; fi'
env:
  global:
  - REPO_NAME=d2l-fetch
  # SAUCE_USERNAME
  - secure: IzOqcVfFQse8Y6ur40FZA51h1HOSfMC5d9szQy7S6ILblhcyWmypyuHBkWyFfilDMVt8wwMr+YrNt1RuUdv1afakhpodrZOReRLJP1R7ECiQN6T5dAOdJY/aVyv7Z5jEu6GuhjRXSIPNoaSMwt4kK9BKVlkzXsPGBDOzOyQex3+pgz4pwXDBoIpnjx8qPv/PnekVVIkaN1k+X/nt0d1Ku34a7ErBJl2Bcfjq1N/DbByd2WlwoXbRD+Y3edePo6WFCJyHkBfEfBFH/pLy2+HvzRudXxJNdbuAHK8fwxCM4ufDcT2LeugyBTK8qz8AbQqa3tmGh/yau2/F5XxWFZh8qIocSVtCiOc3ouSaijdHsCy0QwjAUMm49SPjAan+PUUh1115E4jEwVU7YxA2TnaH6k1eBjpbZTyKFZTWasGAMfSD/RF2jk+qRTSTFTs5SQS1kJZib+yTaA//jG3h+fnXHb6EcrxexesHLXnZg17RpDjFFIk2MvQvvlq8dZ49/i8zSEdX+jcMcX2MRm80CsE0kwQn8z+2J78g7yNElpd6a4gDs75Ede2k7Rr5EgOGMxLqGkI/CDsIu7KX25KmpFIM9TI/cwNzPEDNPoWcE5ZTUPIOHdHvYgIcEM3TyFdvy9sEykVCkFCo2gXnFqghytfceIv9t4nBYBMV99o0V8k7O6A=
  # CDN_SECRET
  - secure: huKYaCOLmmi26nPGHn4XuNbEJu0jRPE4JpWPb4uVQ74CdP9EMSVNF8wr3vktjva4pCmtKP3qgMTfdnnsSX9DJsb5htTEwIh3dn14AygZmVrhm5egeHJvut3FdOrW3jSPm7k9olBYTu/v+WvZAhY6bB0QiDCudOCzmfzA/rcAOFyyQpbCCSEXkMkR4P6+6qruMBQVElma9hg2stt+S7614n+bw4sMPUg1MB9+NdqiYmBkZOfzmEfowsiZq/FbE9F2dHlJleyfHsbJhtQA9HTmma+6ElMGPDrUw09QK5Qh16D2ufZWEL1BALLQvK6mQO3qWbIa7SWtBH1IvLbvc2z3p98a5XMJcLGvxUK4MbvRHZExcNPYHTevzOUG8vyp9XBH1hIZe1gBaIrceGqe3YjSK8rS0z4HG76hpBYPolpnqOuhmubneXgFD/2FRNkcylUUA1WBMN6e9GIq1Fa2SH6Oq/Ai9lXQqKH90UCCYWyioybdS5ecSfFe+fj1Z67vFEP5MbSu1Cg8+uwbYaLsM2HmKiSIrUNxJ30JcL9007IFniCFGnxWHWtvtBW28C4XJsvIuXNdpWqanqvpUP9VJiwPwrqfyQ+vwtLksVu0FsaDterNxK9zjvetjEQAdB7+ZLawHV9c5mK6heOJmj0U+lfpEWa7QmF/tw6GrB9b84Q17zs=
  # GITHUB_RELEASE_TOKEN
  - secure: M8Tgm24HodGjKq7ZhTrhGQDup6ZFySM5b+BbPA2wIBNI57grVQd4m6SG9x54BddyRxwwmvJvgb1YZtAhNvyIxUT1UUij1VJs20TrC3mkJcWYvNPsLRxIKybeVJ4Pasp3sBoGU9eZlhSen6MRogn/E+5PIGCPVxS+M59tvs72uvcLLLeQ8rCVwBcSEXga0XqBYCsccKTBahBQ95rWF+f+L/FTHgaZcUz+PRKaPjo/WwbXKrwNcma6ubth4Zy3dmUG2LY9ZU2URaN7k6/68RbC93CMSxFIFROQ6CKe+nlJO37IbrVEFW9o4buylt615jgU+dPOHmGtRgJgF/JoNrGbYyauO7qpfeoDsGIYEKA37hNpC+OAa6AG35GcKOrfX9hDnZMbDQarQRxFs/UBnRWbsUoPy+yKDfjQoj9WtcCeBQ9p+rr/kKBN6jlDi2ztLavFbVAEKwetbCBRHo35WNR3G0uzKKtp27eSwLSm5PYsq+LlWmLsoEgCPXN4UFLUhQ/mUa5b2R5XoPPCO8AEHgq7Tf2RwQsYVccidaqBDtllNLdkT6HnS/DYVHkr3LaqcoLNEfdi8cHtwbDQG8THVOMvCTjREDSU/L//qTepEdBWcHz2U1gphsv94w4m6JNqF88rYB917NqNBqZfwkuzAX3vcZq9E0f7TH55R2ucCo9R2qc=
addons:
  jwt:
    #SAUCE_ACCESS_KEY
    secure: JjnywrMijyVo/kGr8B170HCASbgfbaO5vPiaNRm80n2L1Y/EI95Zmglubh+cHXEGAIbpRWoZsfTP66FColNQIum1Ey45XhfC1sYkEwHw/taBdr4BUZL/DkeLZKYLw9gDhcpqCiEVMz3amB09mMP549HhYv8/HQh5n64cmq2BwntZlXOFZxuA8Qhkt0k+C0LhaHE+/bjdDM37Qec5WEdCLacjD9xNYjNra70XTNfzEpczcrYRqP89Cy0Ym/oCijRx1UlnqVqjPuy83+GolwmUBeY07AJ920nfpCEBwfbYcFtI1gH8TOWrP2FoQWIHRyPqtHUyKHTF0aev8pI7Vn8Ig0sspBo11Hmg+d1oU7nyVr+PllR3kL4vjfQvNHB/JpaJEfg83wE0lU9fsOsUZFtr/2VTmPFMOVhmkbe/hD/ZayXFaWEmmhpr0XrK6/hDRntHz4W6IkyiPElQSKp3RdU/w1wIajAJot1cpS5QiQOPpPxFCxyuS8PoaitETl5aBMX7ZqkhyHG0Sn4QxHdm4Fyp5PUNau1umgaaUMZg5i900jIoAbmh0kYa93ibe9YBIAg7SmGqD6h9Do3LqsKxDLGNuz0CulZSUGD0YvWdg+WQQa9ikcE0NEMkAeDfL6ubg54Y2lsFkssckkEQ2UGI2WuwbQloKmaCgrTgszbnz+LvciI=
